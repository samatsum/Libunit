# libunit テストフレームワーク課題要件

## I. 必須課題 (Mandatory Part)

### V.1 マイクロフレームワーク (libunit.a)

**テストの連続実行:**
- [ ] 一連のテストを中断なしに次々と実行できる。

**テストの管理と表示:**
- [ ] 各テストは、リスト、配列、ツリーなどのデータ構造に、特定の名前と共に保存される。
- [ ] テスト実行時、テスト名が標準出力に書き出される。

**プロセス分離:**
- [ ] 各テストは個別のプロセスで実行される (fork を使用)。
- [ ] テストプロセス終了後、親プロセスに制御が戻る。

**結果とシグナルの補足:**
- [ ] 親プロセスは、子プロセスの終了ステータス、またはクラッシュした場合のシグナル（少なくとも SIGSEGV と SIGBUS）を検知できる (wait, signal などを使用)。

**出力形式:**
- [ ] テスト結果は [テスト対象関数名]:[テスト名]:[ステータス] の形式で標準出力に表示される。
- [ ] ステータス表示:
  - OK : テスト成功
  - KO : テスト失敗
  - SIGSEGV : セグメンテーションフォルト検出
  - SIGBUS : バスエラー検出
- [ ] 各テストの結果のみが標準出力に書き出される。

**サマリー表示:**
- [ ] 全テストの最後に、実行されたテストの総数と成功したテストの数が表示される。

**終了ステータス:**
- [ ] 全てのテストが成功した場合、プログラムは 0 を返して終了する。
- [ ] １つ以上のテストが失敗した場合、プログラムは -1 を返して終了する。

### V.2 テストの作成

**テスト対象:**
- [ ] 作成したマイクロフレームワークを使用して、テスト用のルーチン自体をテストできる。

**ファイル構成:**
- [ ] 各テストルーチンは tests/<テスト対象関数名> ディレクトリに配置する。
- [ ] 各テストは、以下のプロトタイプに従う関数として実装する:
  ```c
  int execute_test(void);
  ```
  (成功時は 0、失敗時は -1 を返す)
- [ ] テストは、標準出力に何かを書き出す関数用ではない。

**テストファイルの命名規則と構造 (ミニノルム):**
- [ ] 各関数に対応するテストは、同じフォルダ内にまとめ、Launcher という名前のソースファイルを持つ。
- [ ] Launcher は、特定の関数の全テストをロードし実行する。特定のテストを無効化（サイレント化）する機能を持つ（フラグやソースコード変更など）。
- [ ] 1ファイルにつき1関数を記述する。
- [ ] 各テストファイル名は、実行順序を示す数字とアンダースコアで始まる (例: 04_basic_test_four_a.c)。
- [ ] 00_xxx で始まるファイルは常に Launcher とみなす。
- [ ] テストを含む main 関数はプロジェクトのルートフォルダに配置し、全ての Launcher を呼び出す。特定の Launcher をスキップする機能を持つ（フラグやソースコード変更など）。

**Makefile:**
- [ ] Makefile に test ターゲットを追加し、テストファイルをコンパイルして実行バイナリを生成し、実行する。
- [ ] 最適化フラグ (-O3 など) を使用しない。もし使用する場合は別のMakefileルールとする。

**Norme (コーディング規約):**
- [ ] Launcher とテストを含む main 関数は、Normeで定められた関数内の行数制限の対象外とする。

### V.4 提出物

**マイクロフレームワークのソースコード:**
- [ ] framework フォルダに提出。

**テストルーチン (tests フォルダ):**
- [ ] OK を返す実際のテスト。
- [ ] KO を返す実際のテスト。
- [ ] SIGSEGV (セグメンテーションフォルト) を返す実際のテスト。
- [ ] SIGBUS (バスエラー) を返す実際のテスト。

**実用的なテスト (real-tests フォルダ):**
- [ ] 以前に作成したプロジェクト（例: Libft）に対する、少なくとも15個のテストを含むルーチン。

**Makefile:**
- [ ] 各ルーチン（tests, real-tests）は、test 依存関係を含む Makefile を持つ。

**全体:**
- [ ] 提出するファイルは、上記のミニノルムおよび42のNormeを遵守する。

## II. ボーナス課題 (Bonus Part)

- [ ] テスト結果の表示にカラーコードを追加。
- [ ] 標準出力に書き込みを行う関数への対応（ただし、テスト対象関数自体は標準出力に書き込まない）。
- [ ] タイムアウト機能の追加（指定時間経過後にテストプロセスを終了させる。ゾンビプロセスに注意）。
- [ ] より多くのシグナルを捕捉 (SIGABRT, SIGFPE, SIGPIPE, SIGILL)。
- [ ] テストに関する有用な情報を記録するログファイルの作成（ファイル名は [関数名].log）。
- [ ] 追加した各ボーナス機能について、その機能をテストするルーチンを作成する。
- [ ] kill 関数は使用しない。